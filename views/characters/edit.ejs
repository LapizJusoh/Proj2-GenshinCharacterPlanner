<!DOCTYPE html>
<html lang="en">
<head>
  <%- include(`../../partials/head.ejs`)%>
</head>
<body>
  <%- include(`../../partials/header.ejs`)%>
  <main class="container my-4">
    <h1>Editing character: </h1>
    <form action="/characters/<%=chara.id%>?_method=PUT" method="POST">
      <p>Name: <input type="text" name="name" value="<%=chara.name%>" required></p>
      <p>Element: <select name="element" required>
        <option value="Pyro" <% if(chara.element==="Pyro"){ %>selected<% } %>>Pyro</option>
        <option value="Hydro" <% if(chara.element==="Hydro"){ %>selected<% } %>>Hydro</option>
        <option value="Electro" <% if(chara.element==="Electro"){ %>selected<% } %>>Electro</option>
        <option value="Dendro" <% if(chara.element==="Dendro"){ %>selected<% } %>>Dendro</option>
        <option value="Anemo" <% if(chara.element==="Anemo"){ %>selected<% } %>>Anemo</option>
        <option value="Geo" <% if(chara.element==="Geo"){ %>selected<% } %>>Geo</option>
        <option value="Cryo" <% if(chara.element==="Cryo"){ %>selected<% } %>>Cryo</option>
      </select>
      </p>
      <img src="<%=chara.image%>" style="width:100px;">
      <p>Preview Image</p>
      <p>Image URL: <input type="text" name="image" value="<%=chara.image%>"></p>
      <p>Talents:</p><%for(let i=0;i<chara.talents.length;i++){ %>
      <ol>
        <ul>
          <li><input type="text" name="talents[<%=i%>][talentName]" value="<%=chara.talents[i].talentName%>"><br>
            <textarea name="talents[<%=i%>][talentDesc]" cols="50"><%=chara.talents[i].talentDesc%></textarea></li>
        </ul>
      </ol><% } %>
      <h3>Resources Needed to reach Max Level:</h3>
      <p>Total Mora: <input type="number" name="maxLevelRequirement.mora" value="<%=chara.maxLevelRequirement.mora%>"></p>
      <% for(let i=0;i<chara.maxLevelRequirement.materials.length;i++){ %>
      <ul>
          <li>Material needed: <input type="text" name="maxLevelRequirement.materials[<%=i%>][name]" value="<%=chara.maxLevelRequirement.materials[i].name%>"></li>
          <li>Material amount: <input type="number" name="maxLevelRequirement.materials[<%=i%>][amount]" value="<%=chara.maxLevelRequirement.materials[i].amount%>"></li>
          </ul>
      <% } %>
      <p><input type="submit" class="btn btn-outline-primary" value="Edit"></p>
    </form>
    <p><a href="/characters" class="btn btn-primary">Return to Character Index</a></p>
    <p><a href="/" class="btn btn-primary">Return to ALL Index</a></p>
  </main>
  <%- include(`../../partials/footer.ejs`)%>
</body>
</html>